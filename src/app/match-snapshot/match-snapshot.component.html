<div class="match-user-card" *ngIf="matchUser && user">
    <app-profile-top [user]="matchUser" [myUser]="user" (messageEvent)="actionButtonClicked($event)"
        [returnFlg]="returnFlg" [distance]="distance">
    </app-profile-top>

    <div *ngIf="matchUser.matchObj">
        <div [ngClass]="expandBottomFlg?'bottom-expanded':'bottom-collpased'">
            <div *ngIf="showMoreFlg">
                <div style="display: inline-block; width: 100%; max-width: 540px;">

                    <table>
                        <tr>
                            <td width="100%" style="text-align: center;">
                                <div class="motto-text" title="Motto"><i class="fa fa-bullhorn"></i>&nbsp;
                                    <b>{{user.motto}}</b>
                                </div>
                                <div class="motto-text" title="Looking for"><i class="fa fa-eye"></i>&nbsp;
                                    <b>{{user.story}}</b>
                                </div>
                            </td>
                        </tr>
                    </table>

                    <table width="100%">
                        <tr>
                            <td>
                                <div class="small-box" style="font-size: 12px;">
                                    <div class="small-title">Personality</div>
                                    <app-green-check [label]="'Personality Quiz Type'"
                                        [text1]="matchUser.adventureStableText" [text2]="user.adventureStableText"
                                        [img]="'assets/images/personality.png'">
                                    </app-green-check>
                                    <app-green-check [label]="'Politics'" [text1]="matchUser.polyText"
                                        [text2]="user.polyText" [icon]="'fa fa-university'">
                                    </app-green-check>
                                    <div title="Astrological Sign">
                                        <span class="profile-icon"><i class="fa fa-star"></i></span>
                                        <span class="profile-text"> {{matchUser.astrologicalSign}}</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="small-box" style="font-size: 12px;">
                                    <div class="small-title">Body</div>
                                    <app-green-check [label]="'Body'" [text1]="matchUser.bodyDesc"
                                        [text2]="user.bodyDesc" [img]="'assets/images/bodyType.png'">
                                    </app-green-check>
                                    <!--[icon]="matchUser.genderIcon" -->
                                    <div title="Race">
                                        <span class="profile-icon"><i class="fa fa-user"></i></span>
                                        <span class="profile-text"><span *ngIf="matchUser.race == 'Other'">Race:</span> {{matchUser.race}}</span>
                                    </div>
                                    <table width="100%">
                                        <tr>
                                            <td title="tattoos">
                                                <span class="profile-icon"><img src="assets/images/tattoo.png"
                                                        height="18"></span>
                                                <span class="profile-text"> {{matchUser.numTattoos}}</span>
                                            </td>
                                            <td title="piercings">
                                                <span class="profile-icon"><img src="assets/images/piercing.png"
                                                        height="18"></span>
                                                <span class="profile-text"> {{matchUser.numPiercings}}</span>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                    </table>
                    <div *ngIf="showInterestedButtonsFlg" class="small-box"
                        style="text-align: center; font-size: 12px;">
                        <div *ngIf="matchUser.matchObj">
                            <table width="100%">
                                <tr>
                                    <td>
                                        <app-percent-text [label]="'Personality Mt'" [amount]="personalityMatch"
                                            [loadingFlg]="loadingFlg" [img]="'assets/images/personalityMatch.png'">
                                        </app-percent-text>
                                        <app-percent-text [img]="'assets/images/politicsMatch.png'"
                                            [label]="'Politics Match'" [amount]="polyMatch" [loadingFlg]="loadingFlg">
                                        </app-percent-text>
                                    </td>
                                    <td>
                                        <app-percent-text [img]="'assets/images/profileMatch.png'"
                                            [label]="'Profile Match'" [amount]="profileMatch" [loadingFlg]="loadingFlg">
                                        </app-percent-text>
                                        <app-percent-text [img]="'assets/images/totalMatch.png'"
                                            [label]="'Overall Match'" [amount]="totalMatch" [loadingFlg]="loadingFlg">
                                        </app-percent-text>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>



                <app-match-dating-pool *ngIf="matchUser.matchObj && matchUser.matchObj.match_level > 1"
                    [firstName]="matchUser.firstName" [datingPool]="matchUser.dating_pool"></app-match-dating-pool>

                <div *ngIf="matchUser.matchObj.you_interested == 'Y' && matchUser.matchObj.match_level == 1"
                    style="text-align: center;">
                    <div *ngIf="matchUser.matchObj.match_interested == 'N'" class="dark-blue-box">Sorry, but
                        {{matchUser.firstName}} is not interested.</div>
                    <div *ngIf="!matchUser.matchObj.match_interested" class="dark-blue-box">{{matchUser.firstName}} has
                        already
                        been notified that you are interested.</div>
                </div>

                <div *ngIf="matchUser.matchObj.you_interested == 'Y' && matchUser.matchObj.match_level > 1"
                    style="text-align: center;">
                    <div class="dark-blue-box" style="position: relative;">
                        <div *ngIf="matchUser.matchObj">
                            <i class="fa fa-heart" style="color: red;"></i> {{matchUser.firstName}}<sup
                                style="color: gray;">{{matchUser.matchObj.match_level}}</sup> is in your dating pool.
                        </div>
                        <i *ngIf="!showConfirmationFlg" class="fa fa-chevron-circle-right more-options"
                            (mousedown)="showMoreOptionsFlg = !showMoreOptionsFlg"></i>
                        <div *ngIf="showMoreOptionsFlg">
                            <button (mousedown)="buttonPressed('remove')" class="btn btn-warning"><i
                                    class="fa fa-thumbs-o-down"></i> Remove</button>&nbsp;
                            <button (mousedown)="buttonPressed('ban')" class="btn btn-danger"><i class="fa fa-ban"></i>
                                Ban</button>
                        </div>
                        <div *ngIf="showConfirmationFlg"
                            style="border: 1px solid #ccc; border-radius: 5px; padding: 10px;">
                            <div>Are you sure you want to {{action}} {{matchUser.firstName}}?</div>
                            <div *ngIf="action == 'remove'">This action will put {{matchUser.firstName}} on your back
                                burner.
                                Feel free to restore this person to your dating pool at any time.</div>
                            <div *ngIf="action == 'ban'">Banning means this person is removed from your dating pool and
                                is no
                                longer able to see you or communicate with you.
                            </div>
                            <button (mousedown)="showConfirmationFlg=false" class="btn btn-danger">Cancel</button>&nbsp;
                            <button (mousedown)="clickYesOption()" class="btn btn-success">Yes</button>
                        </div>
                    </div>
                </div>
                <div *ngIf="matchUser.matchObj.you_action == 'message sent' && matchUser.matchObj.match_level == 3">
                    <i class="fa fa-paper-plane"></i> You have sent a message to {{matchUser.firstName}}. Hopefully you
                    get a
                    reply back soon!
                </div>
                <div *ngIf="matchUser.matchObj.you_interested == 'B'" class="dark-blue-box">
                    <div>{{matchUser.firstName}} is on your back burner.</div>
                    <button (mousedown)="buttonPressed('ban')" class="btn btn-warning"><i
                            class="fa fa-thumbs-o-down"></i>
                        Remove</button>&nbsp;
                    <button (mousedown)="actionButtonClicked('yesToMatch')" class="btn btn-success"><i
                            class="fa fa-thumbs-o-up"></i>
                        Promote</button>&nbsp;
                    <button *ngIf="!singleProfileFlg" (mousedown)="actionButtonClicked('nextProfile')"
                        class="btn btn-primary"><i class="fa fa-arrow-right"></i>
                        Skip</button>
                </div>
                <div *ngIf="matchUser.matchObj.you_interested == 'N' && matchUser.matchObj.match_level < 2"
                    class="dark-blue-box">You are not interested in
                    {{matchUser.firstName}}.
                </div>
                <button *ngIf="0" class="btn btn-primary" (mousedown)="actionButtonClicked('nextProfile')">Next
                    Profile</button>

                <div *ngIf="matchUser.matchObj.match_interested == 'B'" class="dark-blue-box">
                    You are on this person's back burner. You will not be able to communicated unless you get upgraded
                    to the
                    person's dating pool.
                </div>

                <div *ngIf="showInterestedButtonsFlg && !youAreInterestedFlg">
                    <div *ngIf="matchUser.matchObj.match_interested == 'Y' && matchUser.matchObj.match_level == 1"
                        class="dark-blue-box" style="text-align: center;"><i class="fa fa-heart"
                            style="color: red;"></i>
                        {{matchUser.firstName}} is interested in
                        you!
                    </div>

                </div>
            </div>
        </div>

    </div>
    <app-spinner [loadingFlg]="loadingFlg" [errorMessage]="errorMessage"></app-spinner>
</div>